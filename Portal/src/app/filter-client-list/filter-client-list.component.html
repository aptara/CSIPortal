  <div class="container">
    <form (ngSubmit)="submitForm()" class="mt-4">
      <h2>Search Project</h2>
      <div class="row">
        <div class="form-group col-md-4">
          <label for="fromDate">Start Date:</label>
          <input type="date" id="fromDate" name="fromDate" [(ngModel)]="fromDate" required class="form-control">
        </div>
  
        <div class="form-group col-md-4">
          <label for="toDate">End Date:</label>
          <input type="date" id="toDate" name="toDate" [(ngModel)]="toDate" required class="form-control">
        </div>

        <div class="form-group col-md-4">
          <label for="category">Client:</label>
          <select id="category" name="category" [selectedIndex]="1" [(ngModel)]="selectedClient" required class="form-control">
            <option *ngFor="let client of clients" [value]="client.ClientId">{{ client.ClientName }}</option>
          </select>
          
        </div>
      </div>
      <br>
      <button type="submit" class="btn btn-primary">Search</button>
    </form>
  
    <div *ngIf="resultList && resultList.length > 0" class="mt-4">
      <p-table [value]="resultList" [paginator]="true" [rows]="10" [rowsPerPageOptions]="[10, 50, 100]" [showCurrentPageReport]="true">
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="ClientName" style="min-width:200px">Client Name <p-sortIcon field="ClientName"></p-sortIcon></th>
            <th pSortableColumn="ProjectName"style="min-width:200px">Project Name <p-sortIcon field="ProjectName"></p-sortIcon></th>
            <th pSortableColumn="ConatactName"style="min-width:200px">Contact Name <p-sortIcon field="ConatactName"></p-sortIcon></th>
            <th pSortableColumn="Email"style="min-width:200px">Email <p-sortIcon field="Email"></p-sortIcon></th>
            <th pSortableColumn="IsSurveySubmittedOn"style="min-width:200px">Survey Submitted On<p-sortIcon field="IsSurveySubmittedOn"></p-sortIcon></th>
            <th pSortableColumn="IsSurveySubmitted" style="min-width:200px">Is Survey Submitted?<p-sortIcon field="IsSurveySubmitted"></p-sortIcon></th>
            <th>Actions</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-client>
          <tr>
            <td>{{ client.ClientName }}</td>
            <td>{{ client.ProjectName }}</td>
            <td>{{ client.AptaraContactName }}</td>
            <td>{{ client.AptaraContact }}</td>
            <td>{{ client.ClientDate }}</td>
            <td>{{ client.IsSurveySubmitted }}</td>
            <td>
              <button *ngIf="client.IsSurveySubmitted === 'Yes'" pButton type="button" class="p-button-info" [routerLink]="['/Feedback/Show', client.ClientId]">View</button>
              <button pButton type="button" class="p-button-info" data-bs-toggle="modal" data-bs-target="#linkModal" (click)="openLinkModal(client)">Generate Link</button>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
    

 
<form [formGroup]="linkModalData"  >
  <div class="modal fade" id="linkModal" tabindex="-1" aria-labelledby="linkModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title fs-5 ">Share Link</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          
          <input type="text" class="form-control" formControlName="ClientId" hidden>
          <input type="text" class="form-control" formControlName="ProjectId" hidden>
          
            <div class="row mt-3 ">
              <div class="col ">
                <h6 class="text-secondary">Client Name</h6>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" formControlName="ClientName">
              </div>
            </div>

            <div class="row mt-3 ">
              <div class="col ">
                <h6 class="text-secondary">Project</h6>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <input type="text" class="form-control" formControlName="ProjectName">
              </div>
            </div>

            <div class="row mt-3 ">
              <div class="col ">
                <h6 class="text-secondary">Email</h6>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <input type="text" class="form-control" formControlName="Clientemail" id="Clientemail">
                <div *ngIf="linkModalData.get('Clientemail').hasError('required') && linkModalData.get('Clientemail').touched" class="text-danger">
                  Email is required.
                </div>
                <div *ngIf="linkModalData.get('Clientemail').hasError('email') && linkModalData.get('Clientemail').touched" class="text-danger">
                  Invalid email format.
                </div>
                <div *ngIf="linkModalData.get('Clientemail').hasError('invalidEmails') && linkModalData.get('Clientemail').touched" class="text-danger">
                  Invalid email addresses. Use a valid email format and separate multiple emails with a comma.
                </div>
                <span class="note" data-note="Important note here"><small>Add more than email addresses with comma(,)</small></span>
              </div>
            </div>        

          <div class="row mt-3 ">
            <div class="col ">
              <h6 class="text-secondary">Remark</h6>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <textarea rows="3" cols="80" #txt placeholder="Enter your remark here..." class="form-control" formControlName="Remark">
              </textarea>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal" (click)="submitModalForm($event)">Share</button>
        </div>
      </div>
    </div>
  </div>
</form>